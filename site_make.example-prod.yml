# Directory where you what drush make to build your site code base.
target: docroot

# Parent make file for building code base (and including any other relevant make
# files).
build_file: build.make

# Git subtrees, for any projects you maintain in git repos outside this site
# repository. These could include modules, themes, or distros you maintain on
# drupal.org or custom projects in repos somewhere else.
subtrees:
  example_profile:
    # Path to where drush make will store this project.
    # This will be replaced with a symlink to your subtree stored in
    # projects/example_profile.
    path: docroot/profiles/example_profile
    # URI to git repo.
    uri: 'http://git.drupal.org/project/example_profile.git'
    # Branch to git subtree add.
    branch: 7.x-1.x
    # If squash is set to false, the whole external git history will be pulled
    # into your site repo. (This can look messy and confusing to people who
    # don't understand what they're looking at.)
    squash: TRUE
    # Include the message below with any git subtree commits.
    # It's not obvious form the commit history where a subtree is pulled in
    # from. It can be convienent to provide this info as a part of your commit
    # message to prevent confusion.
    message: 'example_profile subtree added/updated from http://git.drupal.org/project/example_profile.git'
  my_module:
    path: docroot/sites/all/modules/contrib/my_module
    uri: 'http://git.drupal.org/project/my_module.git'
    branch: 7.x-1.x
    squash: TRUE
    message: 'my_module subtree added/updated from http://git.drupal.org/project/my_module.git'

# Custom commands. These are run after subtrees are updated and after the drush make
# rebuild runs, before any changes from drush make are committed.
commands:
  - 'rm -rf docroot/sites/default; cd docroot/sites; ln -s ../../symlink-these/default default'
  - 'rm -rf docroot/.htaccess; cd docroot/; ln -s ../symlink-these/.htaccess .htaccess'
  - 'rm -rf docroot/robots.txt; cd docroot/; ln -s ../symlink-these/robots.txt robots.txt'
  # If your site includes libraries installed by composer (e.g. composer_autoload
  # or guzzle module) you'll want to include something like this:
  # - 'cd docroot/sites/all/modules/guzzle; composer install;
